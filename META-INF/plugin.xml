<idea-plugin version="2">
  <id>pl.projectspace.idea.plugins.php.behat</id>
  <name>Behat</name>
  <version>0.2.1</version>
  <vendor email="michal@przytulski.pl" url="http://przytulski.pl"></vendor>

  <description><![CDATA[
      <p>Very simple but useful plugin for faster behat development.</p>

      <h3>Feature file:</h3>
      <ul>
          <li>tag auto completion</li>
          <li>reference provider for gherking steps</li>
      </ul>

      <h3>Behat context:</h3>
      <ul>
          <li>reference and inspection provider for PageObjcet names</li>
          <li>reference and inspection provider for SubContext names</li>
          <li>create PageObject quick fix for missing classes</li>
          <li>type hinting for getMainContext() method</li>
          <li>type hinting for getSubContext() method</li>
          <li>parameter auto completion for getSubContext() method with names of available contextes</li>
          <li>annotation hinting</li>
      </ul>

      <h3>Page Objects extension:</h3>
      <ul>
          <li>reference provider for getElement method of PageObject classes</li>
          <li>type hinting for getPage() method</li>
          <li>parameter auto completion for getPage() method with names of available pages in current project</li>
      </ul>
      ]]></description>

  <change-notes><![CDATA[
      <h3>0.2.1</h3>
      <ul>
          <li>fixed application freeze during searching and indexing</li>
          <li>added support for Page Object getElement reference names</li>
      </ul>

      <h3>0.2</h3>
      <ul>
          <li>added references resolving for PageObjects, SubContexts and step definitions</li>
          <li>added code inspection for PageObject names and SubContext names</li>
          <li>added missing Page Object class generation</li>
      </ul>

      <h3>0.1</h3>
      <p>First pre public release</p>
      <ul>
          <li>basic type hints for contexts and page object</li>
          <li>some annotation stuff</li>
      </ul>
      ]]>
  </change-notes>

  <!-- please see http://confluence.jetbrains.net/display/IDEADEV/Build+Number+Ranges for description -->
  <idea-version since-build="129.757"/>

  <!-- please see http://confluence.jetbrains.net/display/IDEADEV/Plugin+Compatibility+with+IntelliJ+Platform+Products
       on how to target different products -->
  <!-- uncomment to enable plugin in all products
  <depends>com.intellij.modules.lang</depends>
  -->

  <application-components>
    <!-- Add your application components here -->
  </application-components>

    <project-components>
        <component>
            <implementation-class>pl.projectspace.idea.plugins.php.behat.BehatProjectComponent</implementation-class>
        </component>
    </project-components>

    <actions>
        <action id="CreateFeature" class="pl.projectspace.idea.plugins.php.behat.action.CreateFeatureAction"
                text="Create new feature file">
            <add-to-group group-id="NewGroup" anchor="last"/>
        </action>
        <action id="GenerateActionForStep" class="pl.projectspace.idea.plugins.php.behat.action.GenerateActionForStep"
                text="Generate method for this step">
            <add-to-group group-id="GenerateGroup" anchor="last"/>
        </action>
        <action id="GeneratePageObject" class="pl.projectspace.idea.plugins.php.behat.action.GeneratePageObject"
                text="Generate Page Object ">
            <add-to-group group-id="GenerateGroup" anchor="last"/>
        </action>
    </actions>

    <extensions defaultExtensionNs="org.jetbrains.plugins.cucumber.steps">
        <cucumberJvmExtensionPoint implementation="pl.projectspace.idea.plugins.php.behat.BehatJavaExtension"/>
    </extensions>

    <extensions defaultExtensionNs="com.intellij">

        <php.typeProvider2 implementation="pl.projectspace.idea.plugins.php.behat.code.type.PageObjectTypeProvider"/>
        <php.typeProvider2 implementation="pl.projectspace.idea.plugins.php.behat.code.type.ContextTypeProvider"/>

        <completion.contributor language="Gherkin" implementationClass="pl.projectspace.idea.plugins.php.behat.code.completion.contributor.FeatureCompletionContributor"/>
        <completion.contributor language="PHP" implementationClass="pl.projectspace.idea.plugins.php.behat.code.completion.contributor.ContextCompletionContributor"/>

        <psi.referenceContributor implementation="pl.projectspace.idea.plugins.php.behat.code.reference.contributor.BehatReferenceContributor" />

        <localInspection language="PHP" shortName="InvalidPageNameReference" enabledByDefault="true" level="ERROR"
                         implementationClass="pl.projectspace.idea.plugins.php.behat.code.inspection.PageObjectNameInspection"
                         displayName="Missing page with given name" groupName="Probable bugs" />

        <localInspection language="PHP" shortName="InvalidSubcontextNameReference" enabledByDefault="true" level="ERROR"
                         implementationClass="pl.projectspace.idea.plugins.php.behat.code.inspection.SubContextNameInspection"
                         displayName="Missing subcontext with given name" />

        <projectService serviceImplementation="pl.projectspace.idea.plugins.php.behat.service.locator.PageObjectLocator"/>
        <projectService serviceImplementation="pl.projectspace.idea.plugins.php.behat.service.locator.ContextLocator"/>
        <projectService serviceImplementation="pl.projectspace.idea.plugins.php.behat.service.locator.StepLocator"/>

    </extensions>

    <depends>com.jetbrains.php</depends>
    <depends>com.intellij.modules.platform</depends>
    <depends>cucumber</depends>
    <depends>org.jetbrains.plugins.yaml</depends>
</idea-plugin>