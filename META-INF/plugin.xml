<idea-plugin version="2">
  <id>pl.projectspace.idea.plugins.php.behat</id>
  <name>behat</name>
  <version>0.1</version>
  <vendor email="michal@przytulski.pl" url="http://przytulski.pl"></vendor>

  <description><![CDATA[
      Very simple but useful plugin for faster behat development.
      ]]></description>

  <change-notes><![CDATA[
      Feature file:
      <ul>
          <li>tag auto completion</li>
      </ul>
      Behat context:
      <ul>
          <li>type hinting for getMainContext() method</li>
          <li>type hinting for getSubContext() method</li>
          <li>parameter auto completion for getSubContext() method with names of available contextes</li>
          <li>annotation hinting</li>
      </ul>
      Page Objects extension:
      <ul>
          <li>type hinting for getPage() method</li>
          <li>parameter auto completion for getPage() method with names of available pages in current project</li>
      </ul>
      ]]>
  </change-notes>

  <!-- please see http://confluence.jetbrains.net/display/IDEADEV/Build+Number+Ranges for description -->
  <idea-version since-build="107.105"/>

  <!-- please see http://confluence.jetbrains.net/display/IDEADEV/Plugin+Compatibility+with+IntelliJ+Platform+Products
       on how to target different products -->
  <!-- uncomment to enable plugin in all products
  <depends>com.intellij.modules.lang</depends>
  -->

  <application-components>
    <!-- Add your application components here -->
  </application-components>

    <project-components>
        <component>
            <implementation-class>pl.projectspace.idea.plugins.php.behat.BehatProjectComponent</implementation-class>
        </component>
    </project-components>

    <actions>
        <action id="CreateFeature" class="pl.projectspace.idea.plugins.php.behat.action.CreateFeatureAction"
                text="Create new feature file">
            <add-to-group group-id="NewGroup" anchor="last"/>
        </action>
        <action id="GenerateActionForStep" class="pl.projectspace.idea.plugins.php.behat.action.GenerateActionForStep"
                text="Generate method for this step">
            <add-to-group group-id="GenerateGroup" anchor="last"/>
        </action>
    </actions>

    <extensions defaultExtensionNs="org.jetbrains.plugins.cucumber.steps">
        <cucumberJvmExtensionPoint implementation="pl.projectspace.idea.plugins.php.behat.BehatJavaExtension"/>
    </extensions>

    <extensions defaultExtensionNs="com.intellij">

        <php.typeProvider2 implementation="pl.projectspace.idea.plugins.php.behat.code.type.PageObjectTypeProvider"/>
        <php.typeProvider2 implementation="pl.projectspace.idea.plugins.php.behat.code.type.ContextTypeProvider"/>

        <completion.contributor language="Gherkin" implementationClass="pl.projectspace.idea.plugins.php.behat.code.completion.contributor.FeatureCompletionContributor"/>
        <completion.contributor language="PHP" implementationClass="pl.projectspace.idea.plugins.php.behat.code.completion.contributor.ContextCompletionContributor"/>

        <psi.referenceContributor implementation="pl.projectspace.idea.plugins.php.behat.code.reference.contributor.BehatReferenceContributor" />

        <localInspection language="PHP" shortName="InvalidPageNameReference" enabledByDefault="true" level="ERROR"
                         implementationClass="pl.projectspace.idea.plugins.php.behat.code.inspection.PageObjectNameInspection"
                         displayName="Missing page with given name" />

        <localInspection language="PHP" shortName="InvalidSubcontextNameReference" enabledByDefault="true" level="ERROR"
                         implementationClass="pl.projectspace.idea.plugins.php.behat.code.inspection.SubContextNameInspection"
                         displayName="Missing subcontext with given name" />

        <!--<intentionAction>-->
            <!--<className>pl.projectspace.idea.plugins.php.behat.code.intention.GeneratePageObjectIntention</className>-->
        <!--</intentionAction>-->

        <projectService serviceImplementation="pl.projectspace.idea.plugins.php.behat.service.locator.PageObjectLocator"/>
        <projectService serviceImplementation="pl.projectspace.idea.plugins.php.behat.service.locator.ContextLocator"/>
        <projectService serviceImplementation="pl.projectspace.idea.plugins.php.behat.service.locator.StepLocator"/>

    </extensions>

    <depends>com.jetbrains.php</depends>
    <depends>com.intellij.modules.platform</depends>
    <depends>cucumber</depends>
    <depends>org.jetbrains.plugins.yaml</depends>
</idea-plugin>